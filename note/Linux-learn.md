# Linux-learn

## Linux目录结构

- Linux系统没有盘符的概念，只有一个根目录/,所有文件都在它下面

## linux命令基础格式

- 命令行：即Linux终端，是一种命令提示符页面，以纯‘字符’的形式操作系统，可以使用各种字符化命令对系统发出操作指令
- 命令： 即Linux程序，一个命令就是一个程序，命令没有图形化页面，命令的输入和输出都是通过字符进行，可以在命令行（终端）提供字符化的反馈
- 命令通用格式：`command [-option] [arguments]`
  - command： 命令名称
  - option： 命令选项 [可选，非必填]命令的一些选项，可以通过选项控制命令的行为细节
  - arguments： 命令参数 [可选，非必填]命令的参数，多用于命令的指向目标

## ls 命令入门

- 作用：查看当前目录下的文件和目录
- 格式：`ls [-a -h -l] [linux文件路径]`
  - -a [可选]：显示所有文件，包括隐藏文件
  - -h [可选]：显示文件大小
  - -l [可选]：显示文件详细信息
- 选项可以组合使用：混合使用，如：`ls -ahl`

## cd，pwd 命令入门

- cd 命令：进入指定目录
  - 格式：`cd [linux文件路径]`
  - 不写路径时，默认进入用户主目录
- pwd 命令：查看当前目录
  - 格式：`pwd`
  - 默认显示当前目录的绝对路径，没有选项和参数

## 相对路径和绝对路径

- 相对路径：指相对于当前目录的路径
- 绝对路径：指从根目录开始的路径
- 特殊路径符：
  - `cd .`：进入当前目录
  - `cd ..`：进入上一级目录
  - `cd ~`：进入用户主目录(/home/username)

## `mkdir`: 创建目录

- 语法：`mkdir [-p] [linux文件路径]`
- 参数必须填写，表示Linux文件夹路径，相对路径或者绝对路径都可以
- -p选项可选，表示自动创建不存在的父目录，可用于创建多级目录

## 文件操作命令p1:`touch,cat,more`

- `touch`: 创建文件
  - 语法：`touch [linux文件路径]`
  - `touch`无选项，参数必填，表示Linux文件路径
- `cat`: 显示文件内容
  - 语法：`cat [linux文件路径]`
  - `cat`无选项，参数必填，表示Linux文件路径
- `more`: 显示文件内容
  - 语法：`more [linux文件路径]`
  - `more`支持翻页，使用空格键翻页，q键退出

## 文件操作命令p2:`cp,mv,rm`

- `cp`: 复制文件
  - 语法：`cp [-r] [路径1] [路径2]`
  - -r [可选]：递归复制，将路径1下的所有文件复制到路径2下
  - 路径1：源文件路径，表示被复制的文件或文件夹
  - 路径2：目标文件路径，表示复制到的目标位置
- `mv`: 移动文件
  - 语法：`mv [路径1] [路径2]`
  - 路径1：源文件路径，表示被移动的文件或文件夹
  - 路径2：目标文件路径，也可用于重命名
- `rm`: 删除文件
  - 语法：`rm [-r -f] [路径1] [路径2] ... [路径n]`
  - -f [可选]：强制删除(不会弹出确认信息)
    - 普通用户删除文件不会弹出提示，只有root用户删除会有提示
    - 一般普通用户用不到-f选项
  - -r [可选]：递归删除,用于删除文件夹
  - 路径可以无限多，表示要删除的文件或文件夹
  - `rm`命令支持通配符*，用于模糊匹配
    - `rm *.txt`：删除当前目录下所有txt文件
    - `test*`：删除当前目录下所有test开头的文件
    - `*test`：删除当前目录下所有test结尾的文件
    - `*test*`：删除当前目录下所有包含test的文件

## 查找命令：`which,find`

- `which`命令：查找命令的路径
  - 格式：`which [命令名称]`
- `find`命令：查找文件
  - 名称查找格式：`find [起始路径] -name [文件名]`
  - 通配符：find支持通配符查找
  - 文件大小查找格式：`find [起始路径] -size +|-n[KMG]`
    - +和- ：表示大小关系，+表示大于，-表示小于
    - n ：表示大小数字
    - [kMG] : 表示单位，k(小写)表示kb，M表示MB，G表示GB
    - 示例：查找所有大于1M的文件 find / -size +1M

## `grep,wc,管道符`

- `grep` 命令：从文件中通过关键字过滤文件行
  - 语法：`grep [-n] [关键字] [文件路径]`
  - -n [可选]：显示匹配的行号
  - 关键字： 必填，表示过滤的关键字，带有空格或者他特殊符号，建议用""包起来
  - 文件路径： 必填，表示要过滤的文件路径，可作为管道符内容输入端口
- `wc` 命令：统计文件行数，单词数，字节数
  - 语法：`wc [-c -m -l -w] [文件路径]`
  - -c [可选]：统计字节数
  - -m [可选]：统计字符数
  - -l [可选]：统计行数
  - -w [可选]：统计单词数
  - 默认统计结果格式：`行数 字节数 单词数 文件路径`
  - 被统计文件路径，可作为管道符内容输入端口
- 管道符：`|`
  - 作用：将左边命令的输出结果作为右边命令的输入参数
  - 格式：`命令1 | 命令2`

## `echo,tail`和重定向符

- `echo` 命令：打印输出
  - 语法：`echo "输出内容"`
  - 没有选项，只有一个参数，参数为要输出的内容
  - 推荐使用双引号，避免参数中包含空格时，参数被截断
  - 当"输出内容"打上``，表示被它包围的内容会当做被命令执行
- `tail` 命令：查看文件最后几行
  - 语法：`tail [-f -num] [Linux路径]`
  - -f [可选]：表示持续追踪文件，文件内容有更新时，会实时显示
  - -num [可选]：查看文件最后几行，默认为10行，num为具体数字
- 重定向符：`>` `>>`
  - `>`：将左边命令的结果，**覆盖写入**到符号右侧指定的文件中
  - `>>`：将左边命令的结果，**追加写入**到符号右侧指定的文件中

## vi/vim 命令入门

- vim是vi的加强版本，兼容vi的所有指令
- 三种工作模式：
  - 命令模式：命令模式xai，所敲的按键编辑器都理解为命令，以命令驱动执行不同功能
  - 输入模式：也就是编辑模式，插入模式，此模式下可以对文件内筒进行自由编辑
  - 底线命令模式：以：开始，通常用于文件的保存，退出
- 语法：`vim [文件名]`(vi也可以，不过推荐用vim)
- 如果文件路径表示文件不存在，改命令会用于编辑新文件
- 如果文件路径表示文件存在，那么此命令用于编辑已有文件
- 命令模式指令：
  - `i`:在当前光标位置进入输入模式
  - `a`:在当前光标位置之后进入输入模式
  - `I`:在当前行开头进入输入模式
  - `A`:在当前行末尾进入输入模式
  - `o`:在当前行新建下一行进入输入模式
  - `O`:在当前行新建上一行进入输入模式
  - `esc`:退出输入模式
- 命令模式快捷键：
  - `方向上键和k`：光标上移
  - `方向下键和j`：光标下移
  - `方向左键和h`：光标左移
  - `方向右键和l`：光标右移
  - `0`：光标移到行首
  - `$`：光标移到行尾
  - `page up`：向上翻页
  - `pange down`：向下翻页
  - `/` ：进入搜索模式
  - `n` ：搜索模式下，找到下一个匹配项
  - `N` ：搜索模式下，找到上一个匹配项
  - `dd` ：删除当前行
  - `ndd` ：n是数字，表示删除包括当前光标所在向下n行
  - `yy` : 复制当前行
  - `nyy` ：n是数字，表示复制包括当前光标所在向下n行
  - `p` ：粘贴复制的内容
  - `u` ：撤销上一次操作
  - `ctrl + r` :反向撤销修改
  - `gg` : 跳到首行
  - `G` : 跳到行位
  - `dG` :从当前行开始，向下删除全部
  - `dgg` :从当前行开始，向上删除全部
  - `d$` : 从当前光标开始，删除到行末
  - `d0` ：从当前光标开始，删除到行首
- 底线命令模式：
  - `:wq` : 保存并退出
  - `:q` : 仅退出
  - `:q!` :强制退出
  - `:w` : 仅保存
  - `:set nu` :显示行号
  - `:set paste` :设置粘贴模式

## linux的root用户

- root用户拥有最大的系统操纵权限
- 普通用户一般只能在用户目录下进行操作
- `su`命令：
  - 语法：`su [-] [用户名]`
  - `-`可选，表示是否在切换用户后加载环境变量，一般默认带上
  - 用户名百世要切换的用户，用户名省略则表示切换到root用户
  - 切换后可以用`exit`命令退出回到原来的用户
  - 普通用户之间切换需要输入密码，root用户切换到普通用户不需要输入密码
- `sudo`命令：
  - 语法：`sudo [命令]`
  - 使用`sudo`命令可以让这条命令临时赋予root权限
  - 并非所有用户都有权利使用`sudo`命令，想要使用需要为普通用户添加权限
- 为普通用户配置`sudo`权限：
  - 切换到root用户，执行`visudo`命令
  - 在文件最后添加：`username ALL=(ALL) ALL`，即可赋予普通用户`sudo`权限
  - 可在后面添加`NOPASSWD = ALL`(同一行)，表示不需要输入密码

## 用户和用户组

- Linux权限管控单元是用户级别和用户组级别
- 用户组管理：
  - 以下命令需要root权限
  - `groupadd [用户组名]`：创建用户组
  - `groupdel [用户组名]`：删除用户组
- 用户管理：
  - `useradd [-g -d] [用户名]`：创建用户
    - 选项 `-g`：指定用户所属用户组,不指定`-g`会自动创建同名组并加入，指定`-g`需要组已存在，如果已经存在同名组，就必须使用`-g`指定组名
    - 选项 `-d`：指定用户`HOME`目录，不指定,`HOME`目录默认为`/home/用户名`
  - `userdel [-r] [用户名]`：删除用户
    - 选型 `-r`：删除用户`HOME`目录,不使用`-r`则只删除用户信息，保留`HOME`目录
  - `id [用户名]`：查看用户所属的组，不输入用户名则查看当前用户所属的组
  - `usermod -aG [用户组名] [用户名]`：将指定用户加入指定用户组
  - `getent passwd`：查看所有用户信息
  - `getent group`：查看所有用户组信息

## 查看权限控制信息

- `ls -l`：可以以列表形式查看内容，并显示文件权限信息信息
- 权限信息：举例：`drwxr-xr-x`
  - 第一位：文件类型，`d`表示目录，`-`表示普通文件
  - 第2-4位：文件所有者的权限
  - 第5-7位：文件所属组的权限
  - 第8-10位：文件其他用户的权限
  - `r`表示可读，`w`表示可写，`x`表示可执行,无对应权限则为`-`
- `chmod [-R] [权限] [文件路径]`：修改文件或文件夹权限
  - `-R`：递归修改，将路径下的所有文件或文件夹权限修改为指定权限
  - 只有文件或文件夹所属用户或者root用户有权限修改权限
  - 示例：`chmod u=rwx,g=rx,o=rx hello.txt`,将文件权限修改为`rwxr-xr-x`
    - `u`：修改用户权限
    - `g`：修改用户组权限
    - `o`：修改其他用户权限
  - 快捷写法：`chmod [nnn] [文件路径]`
    - `nnn`：表示权限，如`751`表示`rwxr-x--x`
    - `r`=4,`w`=2,`x`=1,单位数字累加即是权限值（例如7=4+2+1）
- `chown [-R] [用户名:用户组名] [文件路径]`：修改文件或文件夹所属用户和用户组
  - `-R`：递归修改，将路径下的所有文件或文件夹所属用户和用户组修改为指定用户和用户组
  - 只有文件或文件夹所属用户或者root用户有权限修改所属用户和用户组
  - 用户和用户组都为选填，可以只改一个，`:`用来分隔用户和用户组

## Linux使用小技巧

- `ctrl + c` : 强制中断正在执行的程序，命令输入错误也可以用此命令取消
- `ctrl + d` : 退出当前登录,或者退出某些特定程序的专属页面（比如Python）
- `history` : 查看历史输入命令
  - 可以结合管道符`|`筛选查看历史命令
  - 可以通过`!`来自动执行上一次匹配前缀的命令
  - `ctrl + r` : 搜索历史命令,回车可直接执行，小键盘左右键可得到此命令
- 光标移动快捷键：
  - `ctrl + a` : 移动到行首
  - `ctrl + e` : 移动到行尾
    · `ctrl + 键盘左键` :向左跳一个单词
  - `ctrl + 键盘右键` :向右跳一个单词
- `ctlr + l` : 清屏，或者输入`clear`也可以清屏

## 软件安装

- yum : yum是linux下的软件包管理工具(适用于CentOS)
  - RPM包管理器 `.rpm`
  - 语法： `yum [-y] [install|remove|update] [package_name]`
    - 例子：`yum -y install wget`
  - yum需要root权限
- apt : apt是linux下的软件包管理工具(适用于ubuntu系统)
  - DEB包管理器 `.deb`
  - 语法: `apt [-y] [install|remove|update] [package_name]`

## `systemctl`命令

- `systemctl`命令用于管理linux系统服务，比如启动、停止、重启、查看状态等
- 语法：
  - `systemctl start [service_name]`：启动服务
  - `systemctl stop [service_name]`：停止服务
  - `systemctl status [service_name]`：查看服务状态
  - `systemctl restart [service_name]`：重启服务
  - `systemctl enable [service_name]`：设置服务开机启动
  - `systemctl disable [service_name]`：取消服务开机启动

## 软链接

- 作用：创建一个指向目标文件的快捷方式
- 语法：`ln -s [target_file] [link_file]`
  - `-s`：创建软链接
  - `[target_file]`：目标文件
  - `[link_file]`：快捷方式文件目的地
  - 实例：`ln -s /usr/bin/python3 /usr/bin/python`

## 日期和时区

- 获取当前日期和时间,并且可以格式化的显示形式和日期计算：`date`
  - 语法：`date [-d] [+格式化字符串]`
    - `-d`：进行日期计算
    - `+格式化字符串`：指定格式
    - 格式化字符串：
      - `%Y`：年
      - `%m`：月
      - `%d`：日
      - `%H`：时
      - `%M`：分
      - `%S`：秒
      - `%s`: 自然1970年1月1日0时0分0秒以来的秒数
- 修改时区
  - 语法：`rm -f /etc/localtime`先删除原来的时区文件
  - 利用软链创建对应时区文件：`ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime`
- ntp程序
  - 安装：`yum install ntp -y`
  - 启动：`systemctl start ntpd`
  - 开机自启动：`systemctl enable ntpd`
  - 手动校准时间：`ntpdate -u ntp.aliyun.com`(默认是阿里云的ntp服务器)

## ip地址和主机名

- ip地址
  - 每台电脑都有一个地址用于和其他计算机进行通讯，ip地址有两个版本：ipv4和ipv6
  - ipv4地址格式：`a.b.c.d`,期中a,b,c,d都是0-255的数字，如192.168.1.1
  - `ifconfig`查看ip地址(如果无法查看，使用`yum install net-tools -y`安装)
  - 特殊ip地址：
        -127.0.0.1: 用于代指本机
    - 0.0.0.0:
      - 可以用来代表本机
      - 可以在端口绑定中来确定绑定关系
      - 在一些IP地址限制中，0.0.0.0可以代表所有IP地址，意思是允许所有IP地址访问
- 主机名
  - 每台电脑除了对外联络地址(ip地址)以外，还有一个主机名称
  - `hostname`查看主机名称
  - `hostnamectl set-hostname [新的主机名称]`修改主机名称
- 域名解析
  - 域名解析：将域名映射为ip地址

## 解压和压缩

- 压缩格式：
  - `zip`: 格式: Linux、Windows、MacOS,常用
  - `7zip`: Windows系统常用
  - `rar`: Windows系统常用
  - `tar`: Linux、MacOs常用
  - `gzip`: Linux、MacOs常用
- `tar`命令：
  - .tar,称之为tarball,归档文件，即简单的将文件组装到一个.tar的文件内，并没有太多文件体积的减少，仅仅是简单的封装
  - .gz,也常见为.tar.gz,gzip格式压缩文件，即使用gzip压缩算法将文件压缩到一个文件内,可以极大的减少压缩后的体积
  - 语法`tar [-c -v -x  -z -C -f] [参数1] [参数2]···[参数N]`：
  - `-c`：创建tar文件,压缩模式
  - `-v`：显示压缩过程
  - `-x`：解压tar文件,解压模式
  - `-z`：使用gzip压缩算法
  - `-C`：指定解压目录,目的地
  - `-f`：指定tar文件名
  - 常用组合：
    - `tar -zcvf [文件名].tar.gz [目录]`：创建gzip压缩文件
    - `tar -zxvf [文件名].tar.gz [目录]`：解压gzip压缩文件
    - `tar -cvf [文件名].tar.gz [目录]`：创建tar压缩文件
    - `tar -xvf [文件名].tar.gz [目录]`：解压tar压缩文件
    - `tar -zxvf [文件名] -C [目录]`：解压tar压缩文件到指定目录
- `zip`命令：
  - 语法：`zip [-r] [参数1] [参数2] ··· [参数N]`
  - `-r`：递归压缩文件夹
  - 示例：`zip -r [文件名].zip [目录]`
- `unzip`命令：
  - 语法：`unzip [-d] 参数`
  - `-d`：指定解压目录
  - 示例：`unzip [文件名] -d [目录]`

## 虚拟机配置固定ip

- 一般虚拟机IP地址是通过DHCP动态获取的
  - DHCP:动态获取ip地址，即每次重启设备后都会获取一次，可能导致ip地址频繁变更
  - 为了方便远程访问的便捷性，一般会配置一个固定的ip地址
  - 如果ip频繁变化，ip地址和配置好的主机名映射也会失效
- 第一步：在VM中配置IP地址网关和网段
- 第二步：在虚拟机内修改配置文件
  - `vim /etc/sysconfig/network-scripts/ifcfg-ens33`修改配置文件
  - 将`BOOTPROTO=dhcp`改为`BOOTPROTO=static`
  - 添加IP地址、子网掩码、网关和DNS1  

*PS:今天上午固定完ip地址，中午关机吃个饭，下午再打开电脑的时候先是笔记本的wifi掉了，又是放静电又是重装驱动，好不容易折腾完之后想着打开VM再学一会儿，结果发现远程连接不上Linux了，心中一惊，坏了，就开始上vm修,先是找文件配置看是不是出问题了，又去vm虚拟网络服务看有没有问题，看一圈结果什么问题都没发现，但是就是没法连上，我崩溃了，最后回溯快照再重置网卡，才解决问题，得，我就先不固定ip了，我就这么学着吧*

## 网络传输

- `ping`命令：可以用来检查指定网络服务是否可用
  - 格式：`ping [-c num] ip或域名`
  - `-c num`：指定ping的次数
- `wget`:非交互式的文件下载器，可在命令行内下载网络文件
  - 语法：`wget [-b] url`
  - `-b`：后台运行下载，会将日志写入到当前工作目录的wget.log文件中
  - `url：要下载的文件的URL
- `curl`:命令：可以发送HTTP网络请求，可用于下载文件，获取信息等
  - 语法：`curl [-o] url`
  - `-o`:用于下载文件，当url是下载链接是，可以用此选项保存文件
- 端口：
  - 概念：设备与外界通讯交流的出入口，端口可以分为物理端口和虚拟端口
  - 计算机之间的通讯，通过ip只能锁定计算机，但是无法锁定具体程序，通过端口可以锁定具体程序，确保程序之间的沟通
  - 三种端口：
    - 公认端口：1~1023通常是用于一些系统内置或知名程序的预留使用，如SSH的22端口，HTTP的80端口，HTTPS的443端口
    - 注册端口；1024~49151，通常可以随意使用，用于松散的绑定一些程序\服务
    - 动态端口：49152~65535，通常不会固定绑定程序，而是当程序对外进行网络链接时，用于临时使用
  - `nmap`命令：可用来查看端口状态
    - 语法：`namp [hostname|ip]`
  - `netsatat`命令：可查看端口占用情况
    - 语法：`netstat -anp`

## 进程管理

- 程序运行的时候就是进程，是被操作系统所管理的
- `ps`命令：查看进程
  - 语法：`ps [-e -f]`
  - `-e`：查看所有进程
  - `-f`：查看进程的详细信息
- `kill`命令：结束进程
  - 语法：`kill [-9] [进程ID]`
  - `-9`：强制结束进程，不使用此选项会向程序发送信号，如果程序没有处理信号，则结束进程

## 主机状态

- `top`命令：查看系统状态,资源占用等
- `df [-h]`命令：可以查看磁盘使用情况
- `iostat [-x] [num1] [num2]`命令：可以查看CPU，磁盘相关信息
  - `-x`：显示所有信息
  - `num1`：刷新间隔时间
  - `num2`：刷新次数
· `sar`命令：非常复杂，用于查看网络的相关统计信息
  - `sar -n DEV [num1] [num2]`：查看网络设备使用情况
    - `-n`: 查看网络，DEV表示查看网络接口
    - `num1`：刷新间隔时间
    - `num2`：刷新次数

## 环境变量

- 环境变量是操作系统(Windows、Linux、Mac)在运行的时候,记录的一些关键性信息，用以辅助系统运行。
- 环境变量是一种key-value存储结构，key为环境变量名，value为环境变量值。
- `env`：查看环境变量
- `$`: 环境变量的引用符
- 环境变量的设置：
  - `export VAR_NAME=value`：临时设置环境变量
  - 永久生效：
    - `vim ~/.bashrc` 当前用户生效
    - `vim /etc/profile` 所有用户生效
- 环境变量PATH记录了系统执行命令的搜索路径，也可以自己添加搜索路径
  - `export PATH=$PATH:[自定义路径]`

## 上传和下载

- 可以通过shell上传和下载文件
- 命令方式下载：
  - `rz`：进行上传
  - `sz [要下载的文件]`：进行下载
